{"version":3,"sources":["components/dashboard/constants.js","components/dashboard/MarkerCluster.js","components/dashboard/Leaflet.js","components/dashboard/ActiveUsersMap.js"],"names":["customMarker","L","Icon","iconUrl","iconSize","iconAnchor","popupAnchor","mcg","markerClusterGroup","chunkedLoading","spiderfyOnMaxZoom","MarkerCluster","markers","map","useLeaflet","useEffect","clearLayers","lat","long","name","street","location","popupContent","marker","LatLng","icon","addTo","bindPopup","addLayer","propTypes","PropTypes","arrayOf","shape","number","isRequired","string","Leaflet","mapWidth","mapHeight","filter","useContext","AppContext","isDark","useRef","setTimeout","tileLayer","colorFilter","attribution","transparent","current","leafletElement","Map","center","zoom","minZoom","maxZoom","zoomSnap","className","style","width","minHeight","ref","ActiveUsersMap","useState","duration","setDuration","setMapWidth","setMapHeight","mapRef","offsetWidth","offsetHeight","Card","CardHeader","UncontrolledDropdown","DropdownToggle","color","size","boundary","DropdownMenu","right","DropdownItem","divider","CardBody","innerRef","CardFooter","Row","Col","xs","CustomInput","type","bsSize","id","value","onChange","target","Button"],"mappings":"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","file":"static/js/14.995e358f.chunk.js","sourcesContent":["import L from 'leaflet';\r\n\r\nexport const customMarker = new L.Icon({\r\n  iconUrl: 'https://prium.github.io/falcon/v2.3.0/dark/assets/lib/leaflet/images/marker-icon.png',\r\n  iconSize: [25, 41],\r\n  iconAnchor: [10, 41],\r\n  popupAnchor: [2, -40]\r\n});\r\n","import { useEffect } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport L from 'leaflet';\r\nimport 'leaflet.markercluster/dist/leaflet.markercluster';\r\nimport 'leaflet.markercluster/dist/MarkerCluster.css';\r\nimport 'leaflet.markercluster/dist/MarkerCluster.Default.css';\r\nimport { useLeaflet } from 'react-leaflet';\r\nimport { customMarker } from './constants';\r\n\r\nconst mcg = L.markerClusterGroup({\r\n  chunkedLoading: false,\r\n  spiderfyOnMaxZoom: false\r\n});\r\n\r\nconst MarkerCluster = ({ markers }) => {\r\n  const { map } = useLeaflet();\r\n\r\n  useEffect(() => {\r\n    mcg.clearLayers();\r\n    markers.map(({ lat, long, name, street, location }) => {\r\n      const popupContent = `\r\n        <h6 class=\"mb-1\">${name}</h6>\r\n        <p class=\"m-0 text-500\">${street}, ${location}</p>\r\n      `;\r\n      return L.marker(new L.LatLng(lat, long), {\r\n        icon: customMarker\r\n      })\r\n        .addTo(mcg)\r\n        .bindPopup(popupContent);\r\n    });\r\n\r\n    // optionally center the map around the markers\r\n    // map.fitBounds(mcg.getBounds());\r\n    // // add the marker cluster group to the map\r\n    map.addLayer(mcg);\r\n  }, [markers, map]);\r\n\r\n  return null;\r\n};\r\n\r\nMarkerCluster.propTypes = {\r\n  markers: PropTypes.arrayOf(\r\n    PropTypes.shape({\r\n      lat: PropTypes.number.isRequired,\r\n      long: PropTypes.number.isRequired,\r\n      name: PropTypes.string.isRequired,\r\n      street: PropTypes.string,\r\n      location: PropTypes.string\r\n    }).isRequired\r\n  ).isRequired\r\n};\r\n\r\nexport default MarkerCluster;\r\n","import React, { useContext } from 'react';\r\nimport { Map } from 'react-leaflet';\r\n\r\nimport MarkerCluster from './MarkerCluster';\r\nimport { markers } from '../../data/dashboard/activeUsers';\r\nimport 'leaflet.tilelayer.colorfilter';\r\nimport L from 'leaflet';\r\nimport { useRef } from 'react';\r\nimport AppContext from '../../context/Context';\r\n\r\nconst Leaflet = ({ mapWidth, mapHeight }) => {\r\n  const { isDark } = useContext(AppContext);\r\n  const filter = isDark\r\n    ? ['invert:98%', 'grayscale:69%', 'bright:89%', 'contrast:111%', 'hue:205deg', 'saturate:1000%']\r\n    : ['bright:101%', 'contrast:101%', 'hue:23deg', 'saturate:225%'];\r\n\r\n  let map = useRef(null);\r\n\r\n  if (mapWidth && mapHeight) {\r\n    setTimeout(() =>\r\n      L.tileLayer\r\n        .colorFilter('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png', {\r\n          attribution: null,\r\n          transparent: true,\r\n          filter: filter\r\n        })\r\n        .addTo(map.current.leafletElement)\r\n    );\r\n    return (\r\n      <Map\r\n        center={[10.737, 0]}\r\n        zoom={1}\r\n        minZoom={1}\r\n        maxZoom={20}\r\n        zoomSnap={0.5}\r\n        className=\"h-100\"\r\n        style={{ width: '100%', minHeight: 300 }}\r\n        ref={map}\r\n      >\r\n        <MarkerCluster markers={markers} />\r\n      </Map>\r\n    );\r\n  }\r\n  return null;\r\n};\r\n\r\nexport default Leaflet;\r\n","import React, { useState, useRef, useEffect } from 'react';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport {\r\n  Row,\r\n  Col,\r\n  Button,\r\n  Card,\r\n  CardHeader,\r\n  CardBody,\r\n  CardFooter,\r\n  UncontrolledDropdown,\r\n  DropdownToggle,\r\n  DropdownMenu,\r\n  DropdownItem,\r\n  CustomInput\r\n} from 'reactstrap';\r\n\r\nimport 'leaflet/dist/leaflet.css';\r\nimport Leaflet from './Leaflet';\r\n\r\nconst ActiveUsersMap = () => {\r\n  const [duration, setDuration] = useState('week');\r\n\r\n  const [mapWidth, setMapWidth] = useState();\r\n  const [mapHeight, setMapHeight] = useState();\r\n  const mapRef = useRef();\r\n\r\n  const handleHideWidth = () => {\r\n    setTimeout(() => {\r\n      setMapWidth(mapRef.current.offsetWidth);\r\n      setMapHeight(mapRef.current.offsetHeight);\r\n    }, 1000);\r\n  };\r\n  useEffect(() => {\r\n    handleHideWidth();\r\n  }, [mapHeight, mapWidth]);\r\n\r\n  return (\r\n    <Card className=\"h-100 mt-3 mt-lg-0\">\r\n      <CardHeader className=\"bg-light d-flex justify-content-between\">\r\n        <h5 className=\"mb-0\">Active users</h5>\r\n        <UncontrolledDropdown className=\"text-sans-serif\">\r\n          <DropdownToggle color=\"link\" size=\"sm\" className=\"text-600 dropdown-caret-none\" boundary=\"viewport\">\r\n            <FontAwesomeIcon icon=\"ellipsis-h\" className=\"fs--1\" />\r\n          </DropdownToggle>\r\n          <DropdownMenu className=\"border py-0\" right>\r\n            <div className=\"bg-white py-2\">\r\n              <DropdownItem>Edit</DropdownItem>\r\n              <DropdownItem>Move</DropdownItem>\r\n              <DropdownItem>Resize</DropdownItem>\r\n              <DropdownItem divider />\r\n              <DropdownItem className=\"text-warning\">Archive</DropdownItem>\r\n              <DropdownItem className=\"text-danger\">Delete</DropdownItem>\r\n            </div>\r\n          </DropdownMenu>\r\n        </UncontrolledDropdown>\r\n      </CardHeader>\r\n      <CardBody className=\"p-0 overflow-hidden position-relative h-100\" innerRef={mapRef}>\r\n        <Leaflet mapWidth={mapWidth} mapHeight={mapHeight} />\r\n      </CardBody>\r\n      <CardFooter className=\"bg-light\">\r\n        <Row className=\"justify-content-between\">\r\n          <Col xs=\"auto\">\r\n            <CustomInput\r\n              type=\"select\"\r\n              bsSize=\"sm\"\r\n              id=\"selectDuration\"\r\n              value={duration}\r\n              onChange={({ target }) => setDuration(target.value)}\r\n            >\r\n              <option value=\"week\">Last 7 days</option>\r\n              <option value=\"month\">Last month</option>\r\n              <option value=\"year\">Last year</option>\r\n            </CustomInput>\r\n          </Col>\r\n          <Col xs=\"auto\">\r\n            <Button color=\"falcon-default\" size=\"sm\">\r\n              <span className=\"d-none d-sm-inline-block mr-1\">Location</span>Overview\r\n              <FontAwesomeIcon icon=\"chevron-right\" className=\"ml-1 fs--1\" />\r\n            </Button>\r\n          </Col>\r\n        </Row>\r\n      </CardFooter>\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport default ActiveUsersMap;\r\n"],"sourceRoot":""}